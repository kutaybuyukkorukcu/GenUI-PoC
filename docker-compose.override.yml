# Development overrides - only used when running `docker-compose up` (not in production)
services:
  backend:
    build:
      context: .
      dockerfile: Dockerfile.dev
    ports:
      - "5001:8080"
    volumes:
      - .:/src
      - /src/bin
      - /src/obj
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      - ASPNETCORE_URLS=http://+:8080
      - DOTNET_USE_POLLING_FILE_WATCHER=1
      - SEMANTIC_KERNEL_PROVIDER=${SEMANTIC_KERNEL_PROVIDER:-AzureOpenAI}
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - AZURE_OPENAI_ENDPOINT=${AZURE_OPENAI_ENDPOINT}
      - AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
      - AZURE_OPENAI_DEPLOYMENT_NAME=${AZURE_OPENAI_DEPLOYMENT_NAME:-gpt-4.1-mini}
    command: ["dotnet", "watch", "run", "--urls", "http://+:8080"]

  frontend:
    build:
      context: ./client
      dockerfile: Dockerfile.dev
    volumes:
      - ./client:/app
      - /app/node_modules
    ports:
      - "5173:5173"
    environment:
      - NODE_ENV=development
      - DOCKER_CONTAINER=true
    command: ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
